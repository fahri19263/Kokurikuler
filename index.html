<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Digital - Fahri, S.Pd | Guru Informatika SMP Negeri 2 Manggar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        @keyframes shuffle {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        
        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideInFromLeft {
            from {
                opacity: 0;
                transform: translateX(-100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        .fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
        }
        
        .bounce-icon {
            animation: bounce 2s infinite;
        }
        
        .shuffle-animation {
            animation: shuffle 0.5s ease-in-out;
        }
        
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        .card-hover:hover .card-icon {
            animation: bounce 0.6s ease-in-out;
        }
        
        .btn-primary {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .btn-primary:active {
            transform: translateY(0) scale(0.98);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn-secondary {
            transition: all 0.2s ease-in-out;
        }
        
        .btn-secondary:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }
        
        .btn-secondary:active {
            transform: translateY(0);
        }
        
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 50%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .seat-grid {
            display: grid;
            gap: 8px;
            justify-content: center;
        }
        
        .seat {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            border-radius: 8px;
            text-align: center;
            line-height: 1.2;
            transition: all 0.3s ease;
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes flyToSeat {
            0% {
                opacity: 1;
                transform: translateX(0) translateY(0) scale(1);
            }
            50% {
                opacity: 0.8;
                transform: translateX(var(--fly-x)) translateY(var(--fly-y)) scale(0.8);
            }
            100% {
                opacity: 1;
                transform: translateX(var(--fly-x)) translateY(var(--fly-y)) scale(1);
            }
        }
        
        @keyframes seatPop {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .page-transition-enter {
            animation: slideInFromRight 0.6s ease-out forwards;
        }
        
        .page-transition-exit {
            animation: slideInFromLeft 0.4s ease-in forwards;
        }
        
        .counter-animation {
            animation: scaleIn 0.5s ease-out;
        }
        
        .icon-hover {
            transition: all 0.3s ease;
        }
        
        .icon-hover:hover {
            animation: pulse 0.6s ease-in-out;
        }
        
        .input-focus {
            transition: all 0.3s ease;
        }
        
        .input-focus:focus {
            transform: scale(1.02);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .result-appear {
            animation: scaleIn 0.5s ease-out;
        }
        
        .classroom-seat {
            width: 70px;
            height: 70px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
            text-align: center;
            line-height: 1.2;
            transition: all 0.3s ease;
            background: #f9fafb;
            color: #6b7280;
            position: relative;
            overflow: hidden;
        }
        
        .classroom-seat.filled {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            border-color: #93c5fd;
            color: #1e40af;
        }
        
        .classroom-seat.empty {
            background: #f3f4f6;
            border-color: #d1d5db;
            color: #9ca3af;
        }
        
        .flying-name {
            position: fixed;
            z-index: 1000;
            background: #3b82f6;
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: bold;
            pointer-events: none;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        
        .seat-pop {
            animation: seatPop 0.6s ease-out;
        }
        
        @media (max-width: 768px) {
            .card-hover:hover {
                transform: translateY(-4px) scale(1.01);
            }
            
            .btn-primary:hover {
                transform: translateY(-1px) scale(1.01);
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <!-- Navigation Header -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-indigo-600">Portal Digital Guru</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#" onclick="showHome()" class="nav-link text-gray-700 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Beranda</a>
                        <a href="#" class="nav-link text-gray-700 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Profil Saya</a>
                        <a href="#" class="nav-link text-gray-700 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Materi Pelajaran</a>
                        <a href="#" class="nav-link text-gray-700 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Kontak</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Home Page -->
    <div id="home-page">
        <!-- Header Section -->
        <div class="gradient-bg py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center fade-in-up">
                    <!-- Profile Photo -->
                    <div class="w-32 h-32 mx-auto mb-6 bg-white rounded-full shadow-xl flex items-center justify-center overflow-hidden icon-hover cursor-pointer">
                        <span class="text-6xl">üë®‚Äçüíª</span>
                    </div>
                    
                    <!-- Identity -->
                    <h1 class="text-4xl md:text-5xl font-bold text-white mb-2">
                        Fahri, S.Pd
                    </h1>
                    <p class="text-xl text-indigo-100 mb-1">
                        Guru Informatika
                    </p>
                    <p class="text-lg text-indigo-200 mb-6">
                        SMP Negeri 2 Manggar
                    </p>
                    <div class="w-24 h-1 bg-white mx-auto rounded-full opacity-80"></div>
                </div>
            </div>
        </div>

        <!-- Welcome Section -->
        <div class="py-16 bg-white">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 fade-in-up">
                    Selamat Datang di Portal Digital Saya
                </h2>
                <p class="text-lg text-gray-600 leading-relaxed fade-in-up">
                    Media ini saya dedikasikan untuk mendukung proses belajar-mengajar yang lebih efektif, interaktif, dan menyenangkan bagi siswa-siswi SMP Negeri 2 Manggar. Silakan manfaatkan fasilitas yang tersedia untuk membantu aktivitas pembelajaran Anda.
                </p>
            </div>
        </div>

        <!-- Main Feature Cards -->
        <div class="py-16 bg-gray-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h3 class="text-2xl font-bold text-center text-gray-900 mb-12">Fitur Utama Portal</h3>
                
                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Kokurikuler Card -->
                    <div class="card-hover bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl p-8 text-white shadow-xl cursor-pointer" onclick="navigateToPage('kokurikuler')">
                        <div class="text-center">
                            <div class="card-icon w-20 h-20 mx-auto mb-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <span class="text-4xl">üèÜ</span>
                            </div>
                            <h3 class="text-2xl font-bold mb-4">Galeri Kokurikuler</h3>
                            <p class="text-purple-100 mb-6 text-sm leading-relaxed">
                                Form kokurikuler untuk dokumentasi dan pengelolaan kegiatan siswa di luar jam pelajaran reguler.
                            </p>
                            <button class="btn-secondary bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-semibold py-3 px-6 rounded-lg">
                                Lihat Selengkapnya
                            </button>
                        </div>
                    </div>

                    <!-- Acak Tempat Duduk Card -->
                    <div class="card-hover bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl p-8 text-white shadow-xl cursor-pointer" onclick="navigateToPage('tempat-duduk')">
                        <div class="text-center">
                            <div class="card-icon w-20 h-20 mx-auto mb-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <span class="text-4xl">ü™ë</span>
                            </div>
                            <h3 class="text-2xl font-bold mb-4">Generator Denah Kelas</h3>
                            <p class="text-blue-100 mb-6 text-sm leading-relaxed">
                                Ciptakan suasana belajar yang baru dan adil. Acak posisi tempat duduk siswa secara otomatis di sini.
                            </p>
                            <button class="btn-secondary bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-semibold py-3 px-6 rounded-lg">
                                Mulai Acak
                            </button>
                        </div>
                    </div>

                    <!-- Acak Kelompok Card -->
                    <div class="card-hover bg-gradient-to-br from-green-500 to-teal-500 rounded-2xl p-8 text-white shadow-xl cursor-pointer" onclick="navigateToPage('kelompok')">
                        <div class="text-center">
                            <div class="card-icon w-20 h-20 mx-auto mb-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <span class="text-4xl">üß©</span>
                            </div>
                            <h3 class="text-2xl font-bold mb-4">Pembagi Kelompok Cerdas</h3>
                            <p class="text-green-100 mb-6 text-sm leading-relaxed">
                                Butuh membagi kelompok untuk tugas atau diskusi? Gunakan alat ini untuk pembagian yang cepat dan adil.
                            </p>
                            <button class="btn-secondary bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-semibold py-3 px-6 rounded-lg">
                                Buat Kelompok
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Kokurikuler Page -->
    <div id="kokurikuler-page" class="hidden min-h-screen bg-gradient-to-br from-purple-400 to-pink-500">
        <div class="py-8 px-4 sm:px-6 lg:px-8">
            <div class="max-w-6xl mx-auto">
                <button onclick="showHome()" class="btn-secondary mb-8 bg-white bg-opacity-20 text-white px-6 py-3 rounded-lg hover:bg-opacity-30 flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    Kembali ke Beranda
                </button>
                
                <div class="bg-white rounded-2xl p-8 shadow-xl">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 mx-auto mb-4 bg-purple-100 rounded-full flex items-center justify-center">
                            <span class="text-3xl">üèÜ</span>
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-4">Galeri Kokurikuler</h2>
                        <p class="text-gray-600">Form dan dokumentasi kegiatan kokurikuler siswa SMP Negeri 2 Manggar</p>
                    </div>
                    
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="bg-gradient-to-r from-purple-400 to-pink-400 p-6 rounded-xl text-white card-hover cursor-pointer" onclick="navigateToPage('form-rancangan')">
                            <h3 class="text-xl font-bold mb-3">üìù Form Rancangan</h3>
                            <p class="mb-4">Buat rancangan kegiatan kokurikuler baru</p>
                            <button class="bg-white bg-opacity-20 px-4 py-2 rounded-lg text-sm hover:bg-opacity-30 transition-all">
                                Buat Rancangan
                            </button>
                        </div>
                        <div class="bg-gradient-to-r from-indigo-400 to-purple-400 p-6 rounded-xl text-white card-hover">
                            <h3 class="text-xl font-bold mb-3">üìã Form Pendaftaran</h3>
                            <p class="mb-4">Daftarkan siswa untuk kegiatan kokurikuler</p>
                            <button class="bg-white bg-opacity-20 px-4 py-2 rounded-lg text-sm hover:bg-opacity-30 transition-all">
                                Buka Form
                            </button>
                        </div>
                        <div class="bg-gradient-to-r from-blue-400 to-indigo-400 p-6 rounded-xl text-white card-hover">
                            <h3 class="text-xl font-bold mb-3">üë®‚Äçüéì Daftar Peserta</h3>
                            <p class="mb-4">Lihat siswa yang terdaftar dalam kegiatan</p>
                            <button class="bg-white bg-opacity-20 px-4 py-2 rounded-lg text-sm hover:bg-opacity-30 transition-all">
                                Lihat Data
                            </button>
                        </div>
                        <div class="bg-gradient-to-r from-cyan-400 to-blue-400 p-6 rounded-xl text-white card-hover">
                            <h3 class="text-xl font-bold mb-3">üìä Laporan Kegiatan</h3>
                            <p class="mb-4">Buat laporan dan evaluasi kegiatan</p>
                            <button class="bg-white bg-opacity-20 px-4 py-2 rounded-lg text-sm hover:bg-opacity-30 transition-all">
                                Buat Laporan
                            </button>
                        </div>
                        <div class="bg-gradient-to-r from-emerald-400 to-cyan-400 p-6 rounded-xl text-white card-hover">
                            <h3 class="text-xl font-bold mb-3">üìÖ Jadwal Kegiatan</h3>
                            <p class="mb-4">Atur dan kelola jadwal kokurikuler</p>
                            <button class="bg-white bg-opacity-20 px-4 py-2 rounded-lg text-sm hover:bg-opacity-30 transition-all">
                                Lihat Jadwal
                            </button>
                        </div>
                        <div class="bg-gradient-to-r from-orange-400 to-pink-400 p-6 rounded-xl text-white card-hover">
                            <h3 class="text-xl font-bold mb-3">üèÜ Prestasi Siswa</h3>
                            <p class="mb-4">Dokumentasi prestasi dan pencapaian</p>
                            <button class="bg-white bg-opacity-20 px-4 py-2 rounded-lg text-sm hover:bg-opacity-30 transition-all">
                                Lihat Prestasi
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tempat Duduk Page -->
    <div id="tempat-duduk-page" class="hidden min-h-screen bg-gradient-to-br from-blue-400 to-cyan-500">
        <div class="py-8 px-4 sm:px-6 lg:px-8">
            <div class="max-w-6xl mx-auto">
                <button onclick="showHome()" class="btn-secondary mb-8 bg-white bg-opacity-20 text-white px-6 py-3 rounded-lg hover:bg-opacity-30 flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    Kembali ke Beranda
                </button>
                
                <div class="bg-white rounded-2xl p-8 shadow-xl">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center">
                            <span class="text-3xl">ü™ë</span>
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-4">Generator Denah Kelas</h2>
                        <p class="text-gray-600">Atur tempat duduk siswa secara acak untuk menciptakan dinamika kelas yang baru</p>
                    </div>
                    
                    <div class="grid lg:grid-cols-2 gap-8">
                        <!-- Input Section -->
                        <div class="space-y-6">
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <label class="block text-gray-700 font-bold">Daftar Nama Siswa:</label>
                                    <span id="student-counter" class="text-sm text-blue-600 font-semibold">0 siswa</span>
                                </div>
                                <textarea id="student-list" rows="12" class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-blue-500 focus:outline-none resize-none" placeholder="Masukkan nama siswa, satu nama per baris:&#10;Ahmad Rizki&#10;Siti Nurhaliza&#10;Budi Santoso&#10;Rina Melati&#10;Doni Pratama&#10;Lina Sari&#10;Eko Wijaya&#10;Maya Putri&#10;Andi Kurniawan&#10;Dewi Lestari" oninput="updateStudentCounter()"></textarea>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 font-bold mb-2">Jumlah Baris:</label>
                                    <input type="number" id="rows" value="5" min="3" max="8" class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none" onchange="updateSeatingCapacity()">
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-bold mb-2">Jumlah Kolom:</label>
                                    <input type="number" id="cols" value="6" min="4" max="8" class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none" onchange="updateSeatingCapacity()">
                                </div>
                            </div>
                            
                            <div id="capacity-info" class="text-center p-3 bg-blue-50 rounded-lg">
                                <span class="text-blue-700 font-semibold">Kapasitas: 30 tempat duduk</span>
                            </div>
                            
                            <div class="text-center space-y-3">
                                <button onclick="animateSeatingArrangement()" class="btn-primary bg-blue-500 hover:bg-blue-600 text-white px-8 py-4 rounded-xl font-bold text-lg flex items-center justify-center mx-auto">
                                    <span class="text-2xl mr-2">üé≤</span>
                                    ACAK TEMPAT DUDUK
                                </button>
                                <button onclick="resetSeatingChart()" class="btn-secondary bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg text-sm">
                                    üîÑ Reset Denah
                                </button>
                            </div>
                        </div>
                        
                        <!-- Seating Chart Section -->
                        <div class="bg-gray-50 rounded-xl p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-gray-800">Denah Kelas:</h3>
                                <button id="save-btn" onclick="downloadSeatingChart()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm transition-all opacity-50 cursor-not-allowed" disabled>
                                    üíæ Simpan sebagai Gambar
                                </button>
                            </div>
                            
                            <!-- Teacher's Desk -->
                            <div class="mb-6">
                                <div class="bg-amber-100 border-2 border-amber-300 rounded-lg p-4 text-center">
                                    <div class="text-amber-800 font-bold text-lg">üë®‚Äçüè´ MEJA GURU</div>
                                </div>
                            </div>
                            
                            <!-- Seating Grid -->
                            <div id="classroom-grid" class="grid gap-3 justify-center mb-4" style="grid-template-columns: repeat(6, 1fr);">
                                <!-- Seats will be generated here -->
                            </div>
                            
                            <!-- Legend -->
                            <div class="flex justify-center space-x-6 text-sm">
                                <div class="flex items-center">
                                    <div class="w-4 h-4 bg-blue-200 border border-blue-300 rounded mr-2"></div>
                                    <span class="text-gray-600">Terisi</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-4 h-4 bg-gray-100 border border-gray-300 rounded mr-2"></div>
                                    <span class="text-gray-600">Kosong</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Form Rancangan Page -->
    <div id="form-rancangan-page" class="hidden min-h-screen bg-gradient-to-br from-purple-400 to-pink-500">
        <div class="py-8 px-4 sm:px-6 lg:px-8">
            <div class="max-w-4xl mx-auto">
                <button onclick="navigateToPage('kokurikuler')" class="btn-secondary mb-8 bg-white bg-opacity-20 text-white px-6 py-3 rounded-lg hover:bg-opacity-30 flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    Kembali ke Galeri
                </button>
                
                <div class="bg-white rounded-2xl p-8 shadow-xl">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 mx-auto mb-4 bg-purple-100 rounded-full flex items-center justify-center">
                            <span class="text-3xl">üìù</span>
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-4">Form Rancangan Kegiatan Kokurikuler</h2>
                        <p class="text-gray-600">Buat rancangan kegiatan kokurikuler yang terstruktur dan komprehensif</p>
                    </div>
                    
                    <form id="rancangan-form" class="space-y-6" onsubmit="submitRancangan(event)">
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Nama Kegiatan *</label>
                                <input type="text" id="nama-kegiatan" required class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none" placeholder="Contoh: Ekstrakurikuler Robotika">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Jenis Kegiatan *</label>
                                <select id="jenis-kegiatan" required class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none">
                                    <option value="">Pilih Jenis Kegiatan</option>
                                    <option value="olahraga">Olahraga</option>
                                    <option value="seni">Seni & Budaya</option>
                                    <option value="sains">Sains & Teknologi</option>
                                    <option value="bahasa">Bahasa</option>
                                    <option value="kepramukaan">Kepramukaan</option>
                                    <option value="keagamaan">Keagamaan</option>
                                    <option value="lainnya">Lainnya</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 font-bold mb-2">Deskripsi Kegiatan *</label>
                            <textarea id="deskripsi-kegiatan" required rows="4" class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none resize-none" placeholder="Jelaskan tujuan, manfaat, dan gambaran umum kegiatan..."></textarea>
                        </div>
                        
                        <div class="grid md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Tanggal Mulai *</label>
                                <input type="date" id="tanggal-mulai" required class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Tanggal Selesai *</label>
                                <input type="date" id="tanggal-selesai" required class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Waktu Pelaksanaan *</label>
                                <input type="time" id="waktu-pelaksanaan" required class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none">
                            </div>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Tempat Pelaksanaan *</label>
                                <input type="text" id="tempat-pelaksanaan" required class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none" placeholder="Contoh: Lab Komputer, Lapangan Sekolah">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Penanggung Jawab *</label>
                                <input type="text" id="penanggung-jawab" required class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none" placeholder="Nama Guru/Pembina">
                            </div>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Target Peserta</label>
                                <input type="number" id="target-peserta" min="5" max="100" class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none" placeholder="Jumlah siswa">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Estimasi Biaya</label>
                                <input type="number" id="estimasi-biaya" min="0" class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none" placeholder="Dalam Rupiah">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 font-bold mb-2">Sarana dan Prasarana yang Dibutuhkan</label>
                            <textarea id="sarana-prasarana" rows="3" class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none resize-none" placeholder="Daftar peralatan, ruangan, atau fasilitas yang diperlukan..."></textarea>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 font-bold mb-2">Rencana Kegiatan/Agenda</label>
                            <textarea id="rencana-kegiatan" rows="4" class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none resize-none" placeholder="Outline kegiatan per pertemuan atau tahapan pelaksanaan..."></textarea>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 font-bold mb-2">Indikator Keberhasilan</label>
                            <textarea id="indikator-keberhasilan" rows="3" class="input-focus w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none resize-none" placeholder="Bagaimana mengukur keberhasilan kegiatan ini..."></textarea>
                        </div>
                        
                        <div class="text-center pt-6">
                            <button type="submit" class="btn-primary bg-purple-500 hover:bg-purple-600 text-white px-8 py-4 rounded-xl font-bold text-lg flex items-center justify-center mx-auto">
                                <span class="text-2xl mr-2">üíæ</span>
                                SIMPAN RANCANGAN
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Kelompok Page -->
    <div id="kelompok-page" class="hidden min-h-screen bg-gradient-to-br from-green-400 to-teal-500">
        <div class="py-8 px-4 sm:px-6 lg:px-8">
            <div class="max-w-6xl mx-auto">
                <button onclick="showHome()" class="btn-secondary mb-8 bg-white bg-opacity-20 text-white px-6 py-3 rounded-lg hover:bg-opacity-30 flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    Kembali ke Beranda
                </button>
                
                <div class="bg-white rounded-2xl p-8 shadow-xl">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center">
                            <span class="text-3xl">üß©</span>
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-4">Pembagi Kelompok Cerdas</h2>
                        <p class="text-gray-600">Buat kelompok belajar secara acak untuk meningkatkan kerja sama antar siswa</p>
                    </div>
                    
                    <div class="grid lg:grid-cols-2 gap-8">
                        <!-- Input Section -->
                        <div class="space-y-6">
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Daftar Nama Siswa:</label>
                                <textarea id="group-student-list" rows="8" class="w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-green-500 focus:outline-none" placeholder="Masukkan nama siswa, satu nama per baris:&#10;Ahmad&#10;Siti&#10;Budi&#10;Rina&#10;..."></textarea>
                            </div>
                            
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Metode Pembagian:</label>
                                <select id="division-method" class="w-full border-2 border-gray-300 rounded-lg px-4 py-2 focus:border-green-500 focus:outline-none" onchange="toggleDivisionInput()">
                                    <option value="by-groups">Berdasarkan Jumlah Kelompok</option>
                                    <option value="by-members">Berdasarkan Jumlah Anggota per Kelompok</option>
                                </select>
                            </div>
                            
                            <div id="group-count-input">
                                <label class="block text-gray-700 font-bold mb-2">Jumlah Kelompok:</label>
                                <input type="number" id="group-count" value="4" min="2" max="10" class="w-full border-2 border-gray-300 rounded-lg px-4 py-2 focus:border-green-500 focus:outline-none">
                            </div>
                            
                            <div id="members-count-input" class="hidden">
                                <label class="block text-gray-700 font-bold mb-2">Jumlah Anggota per Kelompok:</label>
                                <input type="number" id="members-count" value="4" min="2" max="8" class="w-full border-2 border-gray-300 rounded-lg px-4 py-2 focus:border-green-500 focus:outline-none">
                            </div>
                            
                            <div class="text-center">
                                <button onclick="randomizeGroups()" class="bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-xl font-bold text-lg transition-all transform hover:scale-105 flex items-center justify-center mx-auto">
                                    <span class="text-2xl mr-2">üë•</span>
                                    BAGI KELOMPOK!
                                </button>
                            </div>
                        </div>
                        
                        <!-- Result Section -->
                        <div>
                            <div id="group-loading" class="hidden text-center py-8">
                                <div class="loading-spinner mx-auto mb-4"></div>
                                <p class="text-gray-600">Membagi kelompok...</p>
                            </div>
                            
                            <div id="group-result" class="hidden">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold text-gray-800">Hasil Pembagian Kelompok:</h3>
                                    <div class="space-x-2">
                                        <button onclick="randomizeGroups()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg text-sm transition-all">
                                            üîÑ Acak Ulang
                                        </button>
                                        <button onclick="copyGroupResult()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm transition-all">
                                            üìã Salin Hasil
                                        </button>
                                    </div>
                                </div>
                                <div id="groups-container" class="space-y-4"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Navigation functions
        function navigateToPage(page) {
            const homePage = document.getElementById('home-page');
            const targetPage = document.getElementById(page + '-page');
            
            // Add exit animation to home page
            homePage.style.transition = 'all 0.4s ease-in';
            homePage.style.opacity = '0';
            homePage.style.transform = 'translateX(-50px)';
            
            setTimeout(() => {
                homePage.style.display = 'none';
                document.querySelectorAll('[id$="-page"]').forEach(p => {
                    if (p.id !== 'home-page') p.classList.add('hidden');
                });
                
                // Show target page with enter animation
                targetPage.classList.remove('hidden');
                targetPage.classList.add('page-transition-enter');
                
                // Reset any previous transforms
                targetPage.style.opacity = '1';
                targetPage.style.transform = 'translateX(0)';
            }, 400);
        }

        function showHome() {
            const currentPage = document.querySelector('[id$="-page"]:not(.hidden):not(#home-page)');
            const homePage = document.getElementById('home-page');
            
            if (currentPage) {
                // Add exit animation to current page
                currentPage.style.transition = 'all 0.4s ease-in';
                currentPage.style.opacity = '0';
                currentPage.style.transform = 'translateX(50px)';
                
                setTimeout(() => {
                    document.querySelectorAll('[id$="-page"]').forEach(p => {
                        if (p.id !== 'home-page') p.classList.add('hidden');
                    });
                    
                    // Show home page with enter animation
                    homePage.style.display = 'block';
                    homePage.style.opacity = '0';
                    homePage.style.transform = 'translateX(-50px)';
                    
                    setTimeout(() => {
                        homePage.style.transition = 'all 0.5s ease-out';
                        homePage.style.opacity = '1';
                        homePage.style.transform = 'translateX(0)';
                    }, 50);
                }, 400);
            } else {
                // Direct show if no current page
                homePage.style.display = 'block';
                homePage.style.opacity = '1';
                homePage.style.transform = 'translateX(0)';
            }
        }

        // Seating arrangement functions
        function updateStudentCounter() {
            const studentListText = document.getElementById('student-list').value.trim();
            const students = studentListText ? studentListText.split('\n').filter(name => name.trim() !== '') : [];
            const counter = document.getElementById('student-counter');
            counter.textContent = `${students.length} siswa`;
            
            const rows = parseInt(document.getElementById('rows').value);
            const cols = parseInt(document.getElementById('cols').value);
            const capacity = rows * cols;
            
            if (students.length > capacity) {
                counter.className = 'text-sm text-red-600 font-semibold';
                counter.textContent = `${students.length} siswa (Melebihi kapasitas!)`;
            } else {
                counter.className = 'text-sm text-blue-600 font-semibold';
            }
        }

        function updateSeatingCapacity() {
            const rows = parseInt(document.getElementById('rows').value);
            const cols = parseInt(document.getElementById('cols').value);
            const capacity = rows * cols;
            
            document.getElementById('capacity-info').innerHTML = 
                `<span class="text-blue-700 font-semibold">Kapasitas: ${capacity} tempat duduk</span>`;
            
            generateEmptySeats();
            updateStudentCounter();
        }

        function generateEmptySeats() {
            const rows = parseInt(document.getElementById('rows').value);
            const cols = parseInt(document.getElementById('cols').value);
            const grid = document.getElementById('classroom-grid');
            
            grid.innerHTML = '';
            grid.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
            
            for (let i = 0; i < rows * cols; i++) {
                const seat = document.createElement('div');
                seat.className = 'classroom-seat empty';
                seat.textContent = 'Kosong';
                seat.id = `seat-${i}`;
                grid.appendChild(seat);
            }
        }

        function animateSeatingArrangement() {
            const studentListText = document.getElementById('student-list').value.trim();
            if (!studentListText) {
                alert('Silakan masukkan daftar nama siswa terlebih dahulu!');
                return;
            }

            const students = studentListText.split('\n').filter(name => name.trim() !== '');
            const rows = parseInt(document.getElementById('rows').value);
            const cols = parseInt(document.getElementById('cols').value);
            const totalSeats = rows * cols;

            if (students.length > totalSeats) {
                alert(`Jumlah siswa (${students.length}) melebihi kapasitas tempat duduk (${totalSeats}). Silakan kurangi jumlah siswa atau tambah tempat duduk.`);
                return;
            }

            // Disable button during animation
            const button = event.target;
            button.disabled = true;
            button.innerHTML = '<span class="text-2xl mr-2">‚è≥</span>MENGACAK...';

            // Shuffle students
            const shuffledStudents = [...students].sort(() => Math.random() - 0.5);
            
            // Create flying animations
            shuffledStudents.forEach((student, index) => {
                setTimeout(() => {
                    createFlyingName(student, index);
                }, index * 200);
            });

            // Re-enable button after animation
            setTimeout(() => {
                button.disabled = false;
                button.innerHTML = '<span class="text-2xl mr-2">üé≤</span>ACAK TEMPAT DUDUK';
                
                // Enable save button
                const saveBtn = document.getElementById('save-btn');
                saveBtn.disabled = false;
                saveBtn.className = saveBtn.className.replace('opacity-50 cursor-not-allowed', '');
            }, shuffledStudents.length * 200 + 1000);
        }

        function createFlyingName(studentName, seatIndex) {
            const textarea = document.getElementById('student-list');
            const targetSeat = document.getElementById(`seat-${seatIndex}`);
            
            if (!targetSeat) return;

            // Create flying element
            const flyingName = document.createElement('div');
            flyingName.className = 'flying-name';
            flyingName.textContent = studentName;
            
            // Position at textarea
            const textareaRect = textarea.getBoundingClientRect();
            flyingName.style.left = textareaRect.left + 'px';
            flyingName.style.top = textareaRect.top + textareaRect.height / 2 + 'px';
            
            document.body.appendChild(flyingName);

            // Calculate target position
            const seatRect = targetSeat.getBoundingClientRect();
            const deltaX = seatRect.left + seatRect.width / 2 - textareaRect.left;
            const deltaY = seatRect.top + seatRect.height / 2 - (textareaRect.top + textareaRect.height / 2);

            // Animate to seat
            setTimeout(() => {
                flyingName.style.transition = 'all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                flyingName.style.transform = `translate(${deltaX}px, ${deltaY}px) scale(0.8)`;
                flyingName.style.opacity = '0';
            }, 100);

            // Update seat and remove flying element
            setTimeout(() => {
                targetSeat.textContent = studentName;
                targetSeat.className = 'classroom-seat filled seat-pop';
                document.body.removeChild(flyingName);
            }, 900);
        }

        function resetSeatingChart() {
            generateEmptySeats();
            
            // Disable save button
            const saveBtn = document.getElementById('save-btn');
            saveBtn.disabled = true;
            saveBtn.className += ' opacity-50 cursor-not-allowed';
        }

        function downloadSeatingChart() {
            // Create canvas for download
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            const rows = parseInt(document.getElementById('rows').value);
            const cols = parseInt(document.getElementById('cols').value);
            
            canvas.width = cols * 100 + 50;
            canvas.height = rows * 100 + 150;
            
            // Background
            ctx.fillStyle = '#f9fafb';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Title
            ctx.fillStyle = '#1f2937';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('DENAH TEMPAT DUDUK KELAS', canvas.width / 2, 30);
            
            // Teacher's desk
            ctx.fillStyle = '#fef3c7';
            ctx.fillRect(25, 50, canvas.width - 50, 40);
            ctx.strokeStyle = '#f59e0b';
            ctx.lineWidth = 2;
            ctx.strokeRect(25, 50, canvas.width - 50, 40);
            
            ctx.fillStyle = '#92400e';
            ctx.font = '16px Arial';
            ctx.fillText('MEJA GURU', canvas.width / 2, 75);
            
            // Seats
            const seats = document.querySelectorAll('.classroom-seat');
            seats.forEach((seat, index) => {
                const row = Math.floor(index / cols);
                const col = index % cols;
                const x = col * 100 + 25;
                const y = row * 100 + 120;
                
                // Seat background
                if (seat.classList.contains('filled')) {
                    ctx.fillStyle = '#dbeafe';
                    ctx.strokeStyle = '#3b82f6';
                } else {
                    ctx.fillStyle = '#f3f4f6';
                    ctx.strokeStyle = '#d1d5db';
                }
                
                ctx.fillRect(x, y, 80, 80);
                ctx.lineWidth = 2;
                ctx.strokeRect(x, y, 80, 80);
                
                // Seat text
                ctx.fillStyle = seat.classList.contains('filled') ? '#1e40af' : '#9ca3af';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                
                const text = seat.textContent;
                const words = text.split(' ');
                if (words.length > 1) {
                    ctx.fillText(words[0], x + 40, y + 35);
                    ctx.fillText(words.slice(1).join(' '), x + 40, y + 55);
                } else {
                    ctx.fillText(text, x + 40, y + 45);
                }
            });
            
            // Download
            const link = document.createElement('a');
            link.download = 'denah-tempat-duduk.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            generateEmptySeats();
            updateStudentCounter();
        });

        // Group functions
        function toggleDivisionInput() {
            const method = document.getElementById('division-method').value;
            const groupCountInput = document.getElementById('group-count-input');
            const membersCountInput = document.getElementById('members-count-input');
            
            if (method === 'by-groups') {
                groupCountInput.classList.remove('hidden');
                membersCountInput.classList.add('hidden');
            } else {
                groupCountInput.classList.add('hidden');
                membersCountInput.classList.remove('hidden');
            }
        }

        function randomizeGroups() {
            const studentListText = document.getElementById('group-student-list').value.trim();
            if (!studentListText) {
                alert('Silakan masukkan daftar nama siswa terlebih dahulu!');
                return;
            }

            const students = studentListText.split('\n').filter(name => name.trim() !== '');
            const method = document.getElementById('division-method').value;
            
            let groups = [];
            
            if (method === 'by-groups') {
                const groupCount = parseInt(document.getElementById('group-count').value);
                groups = Array.from({length: groupCount}, () => []);
                
                const shuffledStudents = [...students].sort(() => Math.random() - 0.5);
                shuffledStudents.forEach((student, index) => {
                    groups[index % groupCount].push(student);
                });
            } else {
                const membersPerGroup = parseInt(document.getElementById('members-count').value);
                const shuffledStudents = [...students].sort(() => Math.random() - 0.5);
                
                for (let i = 0; i < shuffledStudents.length; i += membersPerGroup) {
                    groups.push(shuffledStudents.slice(i, i + membersPerGroup));
                }
            }

            // Show loading
            document.getElementById('group-result').classList.add('hidden');
            document.getElementById('group-loading').classList.remove('hidden');

            setTimeout(() => {
                displayGroups(groups);
                document.getElementById('group-loading').classList.add('hidden');
                const result = document.getElementById('group-result');
                result.classList.remove('hidden');
                result.classList.add('result-appear');
            }, 1000);
        }

        function displayGroups(groups) {
            const container = document.getElementById('groups-container');
            container.innerHTML = '';
            
            groups.forEach((group, index) => {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'bg-green-50 p-6 rounded-xl border-2 border-green-200 transform transition-all hover:scale-102';
                groupDiv.innerHTML = `
                    <h4 class="font-bold text-green-800 mb-4 text-lg flex items-center">
                        <span class="text-2xl mr-2">üë•</span>
                        Kelompok ${index + 1} (${group.length} orang)
                    </h4>
                    <ul class="space-y-2">
                        ${group.map((student, idx) => `
                            <li class="text-gray-700 flex items-center">
                                <span class="w-6 h-6 bg-green-200 text-green-800 rounded-full flex items-center justify-center text-sm font-bold mr-3">${idx + 1}</span>
                                ${student}
                            </li>
                        `).join('')}
                    </ul>
                `;
                container.appendChild(groupDiv);
            });
        }

        function copyGroupResult() {
            const groups = Array.from(document.querySelectorAll('#groups-container > div'));
            let result = 'HASIL PEMBAGIAN KELOMPOK\n';
            result += '='.repeat(30) + '\n\n';
            
            groups.forEach((groupDiv, index) => {
                const groupTitle = groupDiv.querySelector('h4').textContent;
                const members = Array.from(groupDiv.querySelectorAll('li')).map(li => li.textContent.trim());
                
                result += `${groupTitle}\n`;
                members.forEach(member => {
                    result += `‚Ä¢ ${member}\n`;
                });
                result += '\n';
            });
            
            navigator.clipboard.writeText(result).then(() => {
                alert('Hasil pembagian kelompok berhasil disalin ke clipboard!');
            }).catch(() => {
                alert('Gagal menyalin ke clipboard. Silakan salin secara manual.');
            });
        }

        // Form Rancangan functions
        function showFormRancangan() {
            navigateToPage('form-rancangan');
        }

        function submitRancangan(event) {
            event.preventDefault();
            
            // Get form data
            const formData = {
                namaKegiatan: document.getElementById('nama-kegiatan').value,
                jenisKegiatan: document.getElementById('jenis-kegiatan').value,
                deskripsiKegiatan: document.getElementById('deskripsi-kegiatan').value,
                tanggalMulai: document.getElementById('tanggal-mulai').value,
                tanggalSelesai: document.getElementById('tanggal-selesai').value,
                waktuPelaksanaan: document.getElementById('waktu-pelaksanaan').value,
                tempatPelaksanaan: document.getElementById('tempat-pelaksanaan').value,
                penanggungJawab: document.getElementById('penanggung-jawab').value,
                targetPeserta: document.getElementById('target-peserta').value,
                estimasiBiaya: document.getElementById('estimasi-biaya').value,
                saranaPrasarana: document.getElementById('sarana-prasarana').value,
                rencanaKegiatan: document.getElementById('rencana-kegiatan').value,
                indikatorKeberhasilan: document.getElementById('indikator-keberhasilan').value
            };
            
            // Show loading state
            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<span class="text-2xl mr-2">‚è≥</span>MENYIMPAN...';
            submitBtn.disabled = true;
            
            // Simulate saving process
            setTimeout(() => {
                // Create downloadable document
                const docContent = generateRancanganDocument(formData);
                downloadRancangan(docContent, formData.namaKegiatan);
                
                // Reset form
                document.getElementById('rancangan-form').reset();
                
                // Show success message
                alert('Rancangan kegiatan berhasil disimpan dan diunduh!');
                
                // Reset button
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 2000);
        }

        function generateRancanganDocument(data) {
            const formatCurrency = (amount) => {
                if (!amount) return 'Tidak ditentukan';
                return new Intl.NumberFormat('id-ID', {
                    style: 'currency',
                    currency: 'IDR'
                }).format(amount);
            };

            const formatDate = (dateString) => {
                if (!dateString) return 'Tidak ditentukan';
                const date = new Date(dateString);
                return date.toLocaleDateString('id-ID', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            };

            return `
RANCANGAN KEGIATAN KOKURIKULER
SMP NEGERI 2 MANGGAR
${'='.repeat(50)}

INFORMASI DASAR
‚Ä¢ Nama Kegiatan: ${data.namaKegiatan}
‚Ä¢ Jenis Kegiatan: ${data.jenisKegiatan}
‚Ä¢ Penanggung Jawab: ${data.penanggungJawab}

DESKRIPSI KEGIATAN
${data.deskripsiKegiatan}

JADWAL PELAKSANAAN
‚Ä¢ Tanggal Mulai: ${formatDate(data.tanggalMulai)}
‚Ä¢ Tanggal Selesai: ${formatDate(data.tanggalSelesai)}
‚Ä¢ Waktu: ${data.waktuPelaksanaan} WIB
‚Ä¢ Tempat: ${data.tempatPelaksanaan}

TARGET DAN ANGGARAN
‚Ä¢ Target Peserta: ${data.targetPeserta || 'Tidak ditentukan'} siswa
‚Ä¢ Estimasi Biaya: ${formatCurrency(data.estimasiBiaya)}

SARANA DAN PRASARANA
${data.saranaPrasarana || 'Tidak ada kebutuhan khusus'}

RENCANA KEGIATAN
${data.rencanaKegiatan || 'Akan disusun lebih lanjut'}

INDIKATOR KEBERHASILAN
${data.indikatorKeberhasilan || 'Akan ditentukan kemudian'}

${'='.repeat(50)}
Dibuat pada: ${new Date().toLocaleDateString('id-ID')}
Oleh: Fahri, S.Pd - Guru Informatika SMP Negeri 2 Manggar
            `.trim();
        }

        function downloadRancangan(content, namaKegiatan) {
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            const fileName = `Rancangan_${namaKegiatan.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.txt`;
            
            link.href = URL.createObjectURL(blob);
            link.download = fileName;
            link.click();
            
            // Clean up
            URL.revokeObjectURL(link.href);
        }

        // Initialize animations
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.card-hover');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.6s ease-out';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 200 + (index * 150));
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9840da9cd292d43a',t:'MTc1ODcwMTkzNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
